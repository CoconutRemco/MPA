{% extends "Mpapp/base_generic.html" %}

{% block content %}
  <h2>Jukebox</h2>
  <p>This is your jukebox page.</p>

  <h2>All songs</h2>
  {% for song in songs %}
    <div>
      <h3>{{ song.title }}</h3>
      <p>{{ song.artist }}</p>
    </div>
  {% endfor %}

{% for playlist in playlists %}
<div>
  <h3>{{ playlist.name }}</h3>
  <p>{{ playlist.owner }}</p>
  <p>Songs:</p>
  <ul>
    {% for song in playlist.songs.all %}
    <li>{{ song.title }} by {{ song.artist }}</li>
    {% endfor %}
    </ul>
    <button class="update-playlist-button" data-id="{{ playlist.id }}">Update Playlist</button>
  </div>
{% endfor %}

  <button id="create-playlist" class="playlist-button">Add Playlist</button>  <!-- Add Playlist button -->

  <button id="get-playlists" class="playlist-button">Get Playlists</button>

  <script>
    document.getElementById('get-playlists').addEventListener('click', function() {
      window.location.href = '/spotify_request';
    });

    var updateButtons = document.querySelectorAll('.update-playlist-button');
    updateButtons.forEach(function(button) {
      button.addEventListener('click', function() {
        var id = this.getAttribute('data-id');
        window.location.href = '/update_playlist/' + id;
      });
    });

    document.getElementById('create-playlist').addEventListener('click', function() {
      window.location.href = '/create_playlist';
    });
  </script>
{% endblock %}
